<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width">
    <meta property="og:title" content=" How to avoid SEO penalties when using Netlify |  CodeSections"> 
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content=" How to avoid SEO penalties when using Netlify |  CodeSections">
    <meta name="twitter:image:src" content="https://www.codesections.com/codesections_logo.png"> 
    <meta property="og:type" content="article">
    <meta property="og:url" content="www.codesections.com">
    <meta property="og:site_name" content="CodeSections">
    <meta property="article:section" content="Article Section">
    <meta property="og:image" itemprop="image primaryImageOfPage" content="https://www.codesections.com/codesections_logo_large.png"><meta name="og:description" content="The personal website and blog of Daniel Long Sockwell, a lawyer-turned-programmer with an interest in web development, open source, and making things as simple as possible.">
    <meta name="description" content="The personal website and blog of Daniel Long Sockwell, a lawyer-turned-programmer with an interest in web development, open source, and making things as simple as possible.">
    <meta name="twitter:description" content="The personal website and blog of Daniel Long Sockwell, a lawyer-turned-programmer with an interest in web development, open source, and making things as simple as possible.">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/manifest.json">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#d9d9d9">
    <link rel="canonical" href="https://www.codesections.com/blog/netlify">
    <title>
       How to avoid SEO penalties when using Netlify |  CodeSections 
    </title>
    <style> 
      /*==================================*\
        ##All CSS for this page
      \*==================================*/
      
      /*  Theme colors
       *  #cde     pastel blue (note boxes)
       *  #000     true black (site header)
       *  #4F82BB; Dark Blue  (Nav bar)
       *  #223     near black (text & logo)
       *  #fff     white (menu text)
       *  #07e     sky blue (links)
       *  #dfe2e5  Light grey (tables & borders)
       */
      html {
        font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Oxygen-Sans,
          Ubuntu,Roboto,Cantarell,"Helvetica Neue",sans-serif;
        font-size: 17px;
        color: #223; /*near black*/
      }
      a {
        color: #0071F0; /*sky blue*/
        text-decoration: none;
      }
      .hidden {
        display: none;
      }
      
      .nav-bar {
        position: fixed;
        z-index: 1;
        left: 0;
        width: 100%;
        padding: 0;
        background-color: #4F82BB; /*Dark Blue*/
        box-shadow: 0 3px 6px rgba(0, 0, 0, .3);
        top: 0;
      }
      .nav-bar__container {
        display: flex;
        max-width: 700px; /*max comfortable line length*/
        padding-left: 8px;
        padding-right:8px;
        margin: auto;
        justify-content: space-between;
      }
      .nav-bar__btn {
        position: relative;
        cursor: pointer;
        background-color: inherit;
        height: 1.25em;
        display: inline-block;
      }
      .nav-bar__btn a {
        color: white;
      }
      .nav-bar__btn a:after {
        position: absolute;
        bottom: 0;
        left: 0;
        width: 0;
        content: "";
        transition: all 0.4s ease;
        border-top: 3px solid #223; /*near black*/
      }
      .nav-bar__btn:not(.nav-bar__btn--icon) a:hover:after {
          width: 100%;
      }
      .svg__logo {
        height: 40px;
        width: 40px;
      }
      .svg__logo--background {
        fill: #4F82BB;
      }
      @media (max-width: 599px) { /*Phone only*/
        .nav-bar__btn {
          font-size: 1.382em;
          line-height: 1.382em;
        }
      }
      @media (min-width: 600px) {  /*Tablet-portrait & up*/
        .nav-bar__btn {
          font-size: 2em;
        }
        .svg__logo {
          height: 64px;
          width: 64px;
        }
      }
      
      /*==================================*\
        ##Main content
      \*==================================*/
      .content-main{
        min-height: calc(100vh - 100px - 1.5em);
        /*  This equals [fullscreen - (top margin) -
         *  (space for the 2-line footer, with margin)]*/
        max-width: 700px; /*  Match nav container width*/
        margin: 3em auto auto auto;
        padding: .1em;
        font-size: 1.15em;
        line-height: 1.6em;
        color: #444;
      }
      .content-main h1 {
        font-size: 1.7em;
        margin-top: .5em;
        margin-bottom: .5em;
        line-height: 1.1em;
      }
      .content-main h2 {
        margin-top: .25em;
      }
      @media (min-width: 600px) {
        .content-main h2 {
          margin-top: 1.25em;
        }
      }
      .content-main p {
        margin-bottom: 1.75em;
      }
      .content-main p code,
      .content-main ul code {
        color: #c0341d;
        background-color: #fbe5e1;
        border-radius: 3px;
      }
      .content-main pre {
        overflow-x: auto;
        padding: .5em;
        line-height: 1.3em;
      }
      .content-main img {
        width: 100%;
      }
      .content-main .give-border img {
        border: #dfe2e5 solid 1px;
      }
      .page-nav__earlier {
        float: right;
      }
      .content-main aside {
        background-color: #cde; /* Pastel blue*/
        display: block;
        padding: .75em;
        margin-top: 1em;
        color: #0d1d25; /*near black*/
        border: solid 2px #0d1d25; /* Near black*/
        max-width: 90%;
        margin: auto;
      }
      .content-main aside p:first-child {
        margin-top: 0;
      }
      .content-main aside p:last-child {
        margin-bottom: 0;
      }
      
      /*==================================*\
        ##Footer
      \*==================================*/
      .footer {
        margin-top: 1.15em;
        text-align: center;
      }
      .footer ul {
        margin: 0;
      }
      .footer li {
        display: inline-block;
      }
  
</style>
  </head>

  <body>
    <nav class="nav-bar">
      <ul class="nav-bar__container">
        <li class="nav-bar__btn"><a href="/">Home</a></li>
        <li class="nav-bar__btn"><a href="/about">About</a></li>
        <li class="nav-bar__btn nav-bar__btn--icon">
            <!-- site logo, as an inline SVG because that loads faster-->
            <a href="/"><span class="hidden">Home</span>
            <svg class="svg__logo" viewBox="0 0 100 120" stroke-width="1px"
              stroke="#000" height="100" width="100">
              <title>Logo image/link to homepage</title>
              <circle class="svg__logo--background" fill="#fff"
              stroke="none" cx="50" cy="35" r="69"/>
              <path d="M -9,50 25,10 V 25 L 4,50 25,75 v 15 z"/>
              <path d="m 49,92 c 12,0 20,-8 20,-17 0,-7 -3,-11 -7,-13 5,-3 7,-7
              7,-12 0,-18 -30,-12 -30,-25 3,-11 17,-7 26,-3 l 2,-7 c -13,-7
              -35,-4 -35,11 0,6 3,11 9,14 -5,2 -9,7 -9,13 0,16 29,11 29,24 0,5
              -6,8 -13,8 -6,0 -11,-4 -15,-6 l -2,7 c 5,3 11,6 18,6 z"/>
              <path d="M 110,50 75,90 V 75 L 98,50 75,25 V 10 Z"/>
              <ellipse class="svg__logo--background" ry="8.5" rx="11.5"
              cy="51" cx="50" fill="#fff"/>
            </svg>
            </a>
        </li>
        <li class="nav-bar__btn"><a href="/blog">Blog</a></li>
        <li class="nav-bar__btn"><a href="/projects">Projects</a></li>
      </ul>
    </nav>
    <section class="content-main">
  
    
  <h1>How to avoid SEO penalties when using Netlify</h1>
  <h2 id="the-problem">The Problem</h2>
<p>I've been really happy with my Netlify hosting.  It's fast, free, and deploys
my site on a global CDN.  Even better, Netlify has all sorts of advanced
deploy previews and other features that I'm only starting to play with.</p>
<p>All that said, today I realized that one consequence of how Netlify does things
is that sites could end up penalized by Google and other search engines.<br />
Specifically, because Netlify makes multiple versions of your site available,
your site could be penalized for having &quot;duplicate content&quot;—the same penalty
that search engines apply to content mills that steal other people's work and
repost it as their own.</p>
<aside>
I have no interest in playing SEO games or trying to get my site ranked
more highly than it organically would be.  I basically figure that the way
to get more readers is to write things that people want to read.  Plus, it's
not like I'm planing to add ads to the site or profit off my readers in any
way.  At the same time, however, I don't want simple mistakes to make my 
content harder to find for those who are interested in it.
</aside>
<p>What is the problem, exactly?  Well, with default settings Netlify makes
every page available as a page on your domain <em>and</em> as a page in a subdomain
inside Netlify.com.  So, for example, the page you are reading right now
would be available by default at both
<a href="https://www.codesections.com/blog/netlify">www.codesections.com/blog/netlify</a> and at
<a href="https://codesections.netlify.com/blog/Netlify">codesections.netlify.com/blog/netlify</a>;
since it shows up at both locations, it would be counted as duplicate
content.</p>
<p>In fact, the problem is even worse than that: Netlify may also (depending on
your settings) publish different branches of your site to different URLS (even
with the same content) and will create &quot;deploy-previews&quot; that allow you to
test live deploys before publishing them to your primary domain.  These features
are <strong>really</strong> great, and I make use of both of them.  (In fact, branch deploys
are what let me easily have
<a href="https://passgen.codesections.com">passgen.codesections.com</a> as a subdomain
in my site).  But they mean that you could end up with more than just two
copies of each page on your site—way more, in fact.</p>
<h2 id="the-solution">The Solution</h2>
<p>Fortunately, the solution is very simple.  You to entirely avoid this issue,
you need to take two steps.</p>
<p><a name="continue-reading"></a></p>
<p>First, tell Netlify to redirect traffic from your Netlify subdomain to your
primary domain.  This is a simple matter of setting the appropriate
<code>_redirects</code> file in the root of your site.  What you need to do is to tell
Netlify to redirect all traffic from the <code>.netlify</code> subdomain back to your
site.  Here's what mine looks like:</p>
<pre style="background-color:#002b36;">
<span style="color:#586e75;"># Redirect default Netlify subdomain to primary domain
</span><span style="color:#268bd2;">https://codesections.netlify.com/*</span><span style="color:#839496;"> https://www.codesections.com/:splat 301!
</span></pre>
<p>Just replace <code>codesections</code> with your base url, and save that file as
<code>_redirects</code> in your site root.  Once you've done that, you'll have solved
the bigger half of the problem.</p>
<p>To solve the second half, you'll need to add <code>rel=&quot;canonical&quot;</code> tags to all
the pages for your site.  Depending on how you build your site, that could
be easy or painful.  I use <a href="https://www.getgutenberg.io/">Gutenberg</a>,
which makes this process incredibly easy.  (Exactly as I'd expect from such
a powerful static site generator.)</p>
<p>All I need to do is to create a new variable in my <code>config.toml</code> file
that's equal to my base url, and then add it to my templates.</p>
<p>Specifically, I add this line to the <code>[extra]</code> section of my <code>config.toml</code>
file:</p>
<pre style="background-color:#002b36;">
<span style="color:#268bd2;">live_base_url </span><span style="color:#839496;">= &quot;</span><span style="color:#2aa198;">https://www.codesections.com</span><span style="color:#839496;">&quot;
</span></pre>
<p>and then add this line to each of my templates inside the <code>&lt;head&gt;</code> section:</p>
<pre style="background-color:#002b36;">
<span style="color:#586e75;">&lt;</span><span style="color:#268bd2;">link </span><span style="color:#839496;">rel</span><span style="color:#657b83;">=</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">canonical</span><span style="color:#839496;">&quot; href</span><span style="color:#657b83;">=</span><span style="color:#839496;">&quot;</span><span style="color:#2aa198;">{{ config.extra.live_base_url }}{{ current_path }}</span><span style="color:#839496;">&quot;</span><span style="color:#586e75;">&gt;
</span></pre>
<p>(Why are we using our own <code>live_base_url</code> instead of Gutenberg's built-in
<code>base_url</code>?  Because you may want to <a href="https://www.getgutenberg.io/documentation/deployment/netlify/">change the
base_url</a> if
you use Netlify's deploy previews, and we don't want to limit ourselves from
using that very helpful feature.)</p>
<p>And that's it!  Your site now has no duplicate content, and won't be unfairly
lumped in with sites that have scraped content.</p>
<p>If you have any questions, feel free to reach out to me in any of the ways
listed on <a href="https://www.codesections.com/about/#contact">my contact page</a>—I'd be happy to help.</p>


  <div>
    
    
  </div>

  
</section>
    
  <footer class="footer">
    <ul>
      <li>© 2018 |</li>
      <li><a href="/about#contact">Contact</a> |</li>
      <li><a href="/license/">Few Rights Reserved</a> |</li>
      <li><a href="/rss.xml" type="application/rss+xml"> RSS</a></li>
    </ul>
    <ul>
      <li><a href="/privacy">Privacy Guarantees</a> |</li>
      <li><a href="https://gitlab.com/codesections/codesections-website">
        Source Code for codesections.com</a>
      </li>
    </ul>
  </footer>

  
</body>
</html>
